{namespace bu = TYPO3\CMS\Beuser\ViewHelpers}
{namespace mum = Serfhos\MyUserManagement\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="actionMenu" />

<f:section name="iconButtons">
	<f:link.action action="list"><bu:spriteManagerIcon iconName="actions-view-go-back" /></f:link.action>
</f:section>

<f:section name="content">
	<h3><f:translate key="compareBackendUsers">Compare backend user groups</f:translate></h3>

	<table border="0" cellpadding="0" cellspacing="0" id="tx_beuser_compare" class="typo3-dblist">
		<tr class="t3-row-header">
			<td class="label"></td>
			<f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
				<td>
					<a href="#" onClick="showClickmenu('be_groups', '{compareBackendUserGroup.uid}', '1', '', '', ''); return false;" title="id={compareBackendUserGroup.uid}">
						<bu:spriteIconForRecord table="be_groups" object="{compareBackendUserGroup}" />
					</a>
					{compareBackendUserGroup.title}
				</td>
			</f:for>
		</tr>
		<tr class="db_list_normal">
			<td><h5><f:translate key="description">Description</f:translate></h5></td>
			<f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
				<td>
					<f:if condition="{compareBackendUserGroup.description}">
						<f:then>
							{compareBackendUserGroup.description}
						</f:then>
						<f:else>
							-
						</f:else>
					</f:if>
				</td>
			</f:for>
		</tr>
		<tr class="db_list_normal">
			<td><h5><f:translate key="subgroups">Sub-groups</f:translate></h5></td>
			<f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
				<td>
					<f:if condition="{compareBackendUserGroup.subGroups}">
						<f:then>
							<f:for each="{compareBackendUserGroup.subGroups}" as="subGroup">
								<bu:spriteIconForRecord table="be_users" object="{subGroup}" />
								{subGroup.title}<br />
							</f:for>
						</f:then>
						<f:else>
							-
						</f:else>
					</f:if>
				</td>
			</f:for>
		</tr>
		<tr class="db_list_normal">
			<td><h5><f:translate key="dbMountPoints">DB mountpoints</f:translate></h5></td>
			<f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
				<td>
					<f:if condition="{compareBackendUserGroup.dbMountPoints}">
						<f:then>
							<bu:display.pages uids="{compareBackendUserGroup.dbMountPoints}" />
						</f:then>
						<f:else>
							-
						</f:else>
					</f:if>
				</td>
			</f:for>
		</tr>
		<tr class="db_list_normal">
			<td><h5><f:translate key="fileMounts">File mountpoints</f:translate></h5></td>
			<f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
				<td>
					<f:if condition="{compareBackendUserGroup.fileMountPoints}">
						<f:then>
							<bu:display.sysFileMounts uids="{compareBackendUserGroup.fileMountPoints}" />
						</f:then>
						<f:else>
							-
						</f:else>
					</f:if>
				</td>
			</f:for>
		</tr>
		<tr class="db_list_normal">
			<td><h5><f:translate key="disable">Enable/Disable</f:translate></h5></td>
			<f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
				<td>
					<f:if condition="{compareBackendUserGroup.isDisabled} == 1">
						<f:then>
							<a href="<bu:issueCommand parameters="tce_db.php?&data[be_groups][{compareBackendUserGroup.uid}][hidden]=0&redirect={redirectUrl}" />">
							<bu:spriteManagerIcon iconName="actions-edit-unhide" options="{title: 'unhide'}" />
							</a>
						</f:then>
						<f:else>
							<a href="<bu:issueCommand parameters="tce_db.php?&data[be_groups][{compareBackendUserGroup.uid}][hidden]=1&redirect={redirectUrl}" />">
							<bu:spriteManagerIcon iconName="actions-edit-hide" options="{title: 'hide'}" />
							</a>
						</f:else>
					</f:if>
				</td>
			</f:for>
		</tr>
		<tr class="db_list_normal">
			<td><h5><f:translate key="users">Users</f:translate></h5></td>
			<f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
				<td>
					<mum:widget.usersFromGroupWidget backendUserGroup="{compareBackendUserGroup}" />
				</td>
			</f:for>
		</tr>
	</table>
</f:section>