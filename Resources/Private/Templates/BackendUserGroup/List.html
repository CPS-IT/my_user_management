{namespace bu = TYPO3\CMS\Beuser\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="actionMenu" />

<f:section name="iconButtons">
    <a href="#" onclick="window.location.href='alt_doc.php?returnUrl='+T3_THIS_LOCATION+'&edit[be_groups][0]=new'; return false;"><bu:spriteManagerIcon iconName="actions-document-new" /></a>
</f:section>

<f:section name="title">
    <h1><f:translate key="backendGroupListing">Backend Group Listing</f:translate></h1>
</f:section>

<f:section name="content">
    <f:comment>
        Listing of backend user groups on compare list
    </f:comment>
    <f:if condition="{compareBackendUserGroupList}">
        <bu:Section title="{f:translate(key: 'section.compare', default: 'Compare')}" collapsible="TRUE">
            <ul id="compareBackendUserGroups">
                <f:for each="{compareBackendUserGroupList}" as="compareBackendUserGroup">
                    <li>
                        <f:link.action action="removeFromCompareList" arguments="{uid: compareBackendUserGroup.uid}"
                            ><bu:SpriteManagerIcon iconName="actions-selection-delete" /></f:link.action>

                        <a href="#" onClick="showClickmenu('be_groups', '{compareBackendUserGroup.uid}', '1', '', '', ''); return false;" title="id={compareBackendUserGroup.uid}"><bu:spriteIconForRecord table="be_groups" object="{compareBackendUserGroup}" /></a>

                        {compareBackendUserGroup.title}
                    </li>
                </f:for>
            </ul>

            <f:form action="compare">
                <f:form.submit value="{f:translate(key: 'compareBackendUserGroupList', default: 'Compare group list')}" />
            </f:form>

        </bu:Section>
    </f:if>

    <f:render partial="Filters/BackendUserGroup/Index" arguments="{backendUserGroupDemand: backendUserGroupDemand}" />

    <f:comment>
        Listing of all groups
    </f:comment>

    <f:if condition="<f:count subject='{backendUserGroups}' /> > 50">
        <f:then>
            <f:be.widget.paginate objects="{backendUserGroups}" as="paginatedBackendUserGroups" configuration="{itemsPerPage: 50, insertAbove: 1, insertBelow: 1}">
                <table border="0" cellpadding="0" cellspacing="0" class="typo3-dblist">
                    <tr class="t3-row-header">
                        <td></td>
                        <td><f:translate key="title">Title</f:translate></td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <f:for each="{paginatedBackendUserGroups}" as="backendUserGroup">
                        <f:render partial="BackendUserGroup/IndexListRow" arguments="{demand: demand, backendUserGroup: backendUserGroup, dateFormat: dateFormat, timeFormat: timeFormat, returnUrl: returnUrl}" />
                    </f:for>
                    <f:comment>
                        Footer row: not officially defined style yet
                    </f:comment>
                    <tr>
                        <td colspan="4">
                            <f:count subject="{backendUserGroups}" /> <f:translate key="groups">Groups</f:translate>
                        </td>
                    </tr>
                </table>
            </f:be.widget.paginate>
        </f:then>
        <f:else>
            <table border="0" cellpadding="0" cellspacing="0" class="typo3-dblist">
                <tr class="t3-row-header">
                    <td></td>
                    <td><f:translate key="title">Title</f:translate></td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <f:for each="{backendUserGroups}" as="backendUserGroup">
                    <f:render partial="BackendUserGroup/IndexListRow" arguments="{demand: demand, backendUserGroup: backendUserGroup, dateFormat: dateFormat, timeFormat: timeFormat, returnUrl: returnUrl}" />
                </f:for>
                <f:comment>
                    Footer row: no officially defined style yet
                </f:comment>
                <tr>
                    <td colspan="4">
                        <f:count subject="{backendUserGroups}" /> <f:translate key="groups">Groups</f:translate>
                    </td>
                </tr>
            </table>
        </f:else>
    </f:if>
</f:section>